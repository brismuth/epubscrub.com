(this["webpackJsonpebook-cleaner"]=this["webpackJsonpebook-cleaner"]||[]).push([[7],{108:function(n,e,r){n.exports=r(188)},114:function(n,e,r){var o={"./ion-action-sheet-ios.entry.js":[192,31],"./ion-action-sheet-md.entry.js":[193,32],"./ion-alert-ios.entry.js":[194,33],"./ion-alert-md.entry.js":[195,34],"./ion-app_8-ios.entry.js":[196,13],"./ion-app_8-md.entry.js":[197,14],"./ion-avatar_3-ios.entry.js":[198,35],"./ion-avatar_3-md.entry.js":[199,36],"./ion-back-button-ios.entry.js":[200,37],"./ion-back-button-md.entry.js":[201,38],"./ion-backdrop-ios.entry.js":[202,79],"./ion-backdrop-md.entry.js":[203,80],"./ion-button_2-ios.entry.js":[204,39],"./ion-button_2-md.entry.js":[205,40],"./ion-card_5-ios.entry.js":[206,41],"./ion-card_5-md.entry.js":[207,42],"./ion-checkbox-ios.entry.js":[208,43],"./ion-checkbox-md.entry.js":[209,44],"./ion-chip-ios.entry.js":[210,45],"./ion-chip-md.entry.js":[211,46],"./ion-col_3.entry.js":[212,81],"./ion-datetime_3-ios.entry.js":[213,19],"./ion-datetime_3-md.entry.js":[214,20],"./ion-fab_3-ios.entry.js":[215,47],"./ion-fab_3-md.entry.js":[216,48],"./ion-img.entry.js":[217,82],"./ion-infinite-scroll_2-ios.entry.js":[218,83],"./ion-infinite-scroll_2-md.entry.js":[219,84],"./ion-input-ios.entry.js":[220,49],"./ion-input-md.entry.js":[221,50],"./ion-item-option_3-ios.entry.js":[222,51],"./ion-item-option_3-md.entry.js":[223,52],"./ion-item_8-ios.entry.js":[224,53],"./ion-item_8-md.entry.js":[225,54],"./ion-loading-ios.entry.js":[226,55],"./ion-loading-md.entry.js":[227,56],"./ion-menu_3-ios.entry.js":[228,57],"./ion-menu_3-md.entry.js":[229,58],"./ion-modal-ios.entry.js":[230,15],"./ion-modal-md.entry.js":[231,16],"./ion-nav_2.entry.js":[232,27],"./ion-popover-ios.entry.js":[233,17],"./ion-popover-md.entry.js":[234,18],"./ion-progress-bar-ios.entry.js":[235,59],"./ion-progress-bar-md.entry.js":[236,60],"./ion-radio_2-ios.entry.js":[237,61],"./ion-radio_2-md.entry.js":[238,62],"./ion-range-ios.entry.js":[239,63],"./ion-range-md.entry.js":[240,64],"./ion-refresher_2-ios.entry.js":[241,21],"./ion-refresher_2-md.entry.js":[242,22],"./ion-reorder_2-ios.entry.js":[243,29],"./ion-reorder_2-md.entry.js":[244,30],"./ion-ripple-effect.entry.js":[245,85],"./ion-route_4.entry.js":[246,65],"./ion-searchbar-ios.entry.js":[247,66],"./ion-searchbar-md.entry.js":[248,67],"./ion-segment_2-ios.entry.js":[249,68],"./ion-segment_2-md.entry.js":[250,69],"./ion-select_3-ios.entry.js":[251,70],"./ion-select_3-md.entry.js":[252,71],"./ion-slide_2-ios.entry.js":[253,86],"./ion-slide_2-md.entry.js":[254,87],"./ion-spinner.entry.js":[255,25],"./ion-split-pane-ios.entry.js":[256,88],"./ion-split-pane-md.entry.js":[257,89],"./ion-tab-bar_2-ios.entry.js":[258,72],"./ion-tab-bar_2-md.entry.js":[259,73],"./ion-tab_2.entry.js":[260,28],"./ion-text.entry.js":[261,74],"./ion-textarea-ios.entry.js":[262,75],"./ion-textarea-md.entry.js":[263,76],"./ion-toast-ios.entry.js":[264,77],"./ion-toast-md.entry.js":[265,78],"./ion-toggle-ios.entry.js":[266,23],"./ion-toggle-md.entry.js":[267,24],"./ion-virtual-scroll.entry.js":[268,90]};function t(n){if(!r.o(o,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=o[n],t=e[0];return r.e(e[1]).then((function(){return r(t)}))}t.keys=function(){return Object.keys(o)},t.id=114,n.exports=t},116:function(n,e,r){var o={"./ion-icon.entry.js":[272,93]};function t(n){if(!r.o(o,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=o[n],t=e[0];return r.e(e[1]).then((function(){return r(t)}))}t.keys=function(){return Object.keys(o)},t.id=116,n.exports=t},117:function(n,e,r){},129:function(n,e){},131:function(n,e){},141:function(n,e,r){},142:function(n,e,r){},143:function(n,e,r){},175:function(n,e,r){},176:function(n,e,r){},187:function(n,e,r){},188:function(n,e,r){"use strict";r.r(e);var o=r(0),t=r.n(o),a=r(55),i=r.n(a),s=r(6),c=r(10),g=r(18),u=(r(117),[{title:"Upload an eBook",url:"/page/Upload",iosIcon:g.h,mdIcon:g.i},{title:"My Books",url:"/page/MyBooks",iosIcon:g.j,mdIcon:g.k}]),l=function(){var n=Object(c.g)();return t.a.createElement(s.s,{contentId:"main",type:"overlay"},t.a.createElement(s.j,null,t.a.createElement(s.q,{id:"inbox-list"},t.a.createElement(s.r,null,"ePubScrub"),t.a.createElement(s.w,null,"Read books however the ",t.a.createElement("i",null,"BLEEP")," you want"),u.map((function(e,r){return t.a.createElement(s.u,{key:r,autoHide:!1},t.a.createElement(s.n,{className:n.pathname===e.url?"selected":"",routerLink:e.url,routerDirection:"none",lines:"none",detail:!1},t.a.createElement(s.m,{slot:"start",ios:e.iosIcon,md:e.mdIcon}),t.a.createElement(s.o,null,e.title)))})))))},d=r(9),C=r.n(d),p=r(60),h=r(14),f=r(52),m=r.n(f),b=r(101),v=r.n(b),S=r(2),y=function n(){var e=this;Object(S.a)(this,n),this.errorHandler=function(n){console.error("Error using IndexedDB")},this.dbUpgrade=function(n){var e=n.target.result;if(e.objectStoreNames.contains("bookFiles")||e.createObjectStore("bookFiles",{keyPath:"id"}),!e.objectStoreNames.contains("bookMetaData")){var r=e.createObjectStore("bookMetaData",{keyPath:"id"});r.createIndex("name","name",{unique:!1}),r.createIndex("author","author",{unique:!1}),r.createIndex("uploadDate","uploadDate",{unique:!1}),r.createIndex("publishDate","publishDate",{unique:!1})}e.objectStoreNames.contains("bookLocations")||e.createObjectStore("bookLocations",{keyPath:"bookID"})},this.startRequest=function(){var n=window.indexedDB.open("ebook-cleaner",3);return n.onerror=e.errorHandler,n.onupgradeneeded=e.dbUpgrade,n},this.saveGeneric=function(n,r){return new Promise((function(o,t){e.startRequest().onsuccess=function(e){var a=e.target.result.transaction(n,"readwrite").objectStore(n).put(r);a.onsuccess=function(){o()},a.onerror=function(n){console.error(n),t(n)}}}))},this.getByID=function(n,r){return new Promise((function(o,t){e.startRequest().onsuccess=function(e){var a=e.target.result.transaction(n,"readwrite").objectStore(n).get(r);a.onsuccess=function(){o(a.result)},a.onerror=function(n){console.error(n),t(n)}}}))},this.saveBook=function(){var n=Object(h.a)(C.a.mark((function n(r){var o,t;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={id:r.id,file:r.file},n.next=3,e.saveGeneric("bookFiles",o);case 3:return t={id:r.id,name:r.name,author:r.author,uploadDate:r.uploadDate,fileName:r.fileName,publishDate:r.publishDate,coverImage:r.coverImage},n.next=6,e.saveGeneric("bookMetaData",t);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),this.listBooks=function(){return new Promise((function(n,r){e.startRequest().onsuccess=function(e){var o=e.target.result.transaction("bookMetaData","readwrite").objectStore("bookMetaData").getAll();o.onsuccess=function(){var e=o.result;n(e)},o.onerror=function(n){console.error(n),r(n)}}}))},this.getBook=function(n){return e.getByID("bookFiles",n)},this.saveLocation=function(){var n=Object(h.a)(C.a.mark((function n(r,o){var t;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={bookID:r,bookLocation:o},n.next=3,e.saveGeneric("bookLocations",t);case 3:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}(),this.getLocation=function(n){return e.getByID("bookLocations",n)}},k=(r(141),function(){var n=new m.a,e=new y,r=[],o=function(){var e=Object(h.a)(C.a.mark((function e(o){var t,i,s,c,g,u,l,d,h,f,m,b,S;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:r.length=0,t=0;case 4:if(!(t<o.length)){e.next=58;break}return i=o[t],s=void 0,e.prev=7,e.next=10,n.loadAsync(i);case 10:return s=e.sent,c={id:i.name+" - "+(new Date).toLocaleString(),name:i.name,author:"Unknown",uploadDate:new Date,fileName:i.name,publishDate:new Date,coverImage:void 0,file:i},r.push(c),e.next=15,n.file(/content.opf/);case 15:g=e.sent,u=Object(p.a)(g),e.prev=17,u.s();case 19:if((l=u.n()).done){e.next=41;break}if(!(d=l.value)){e.next=39;break}return e.next=24,d.async("text");case 24:return h=e.sent,f=v.a.xml2js(h,{compact:!0}),m=f.package.metadata,c.author=m["dc:creator"]._text,c.name=m["dc:title"]._text,c.publishDate=m["dc:date"]._text,e.next=33,a(f);case 33:if(!(b=e.sent)){e.next=39;break}return S=d.name.replace("content.opf",""),e.next=38,s.files[S+b].async("base64");case 38:c.coverImage=e.sent;case 39:e.next=19;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(17),u.e(e.t0);case 46:return e.prev=46,u.f(),e.finish(46);case 49:e.next=55;break;case 51:return e.prev=51,e.t1=e.catch(7),console.error("Error reading "+i.name+": "+e.t1.message),e.abrupt("return");case 55:t++,e.next=4;break;case 58:case"end":return e.stop()}}),e,null,[[7,51],[17,43,46,49]])})));return function(n){return e.apply(this,arguments)}}(),a=function(n){var e="",r=n.package.metadata;r.meta&&r.meta.forEach((function(n){"cover"===n._attributes.name&&(e=n._attributes.content)}));var o="";return n.package.manifest.item.forEach((function(n){(n._attributes.id===e||"cover-image"===n._attributes.properties||void 0===o&&n._attributes.id.includes("cover"))&&(o=n._attributes.href)})),o},i=function(){var n=Object(h.a)(C.a.mark((function n(){var o,t;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r&&0!==r.length){n.next=2;break}return n.abrupt("return");case 2:o=0;case 3:if(!(o<r.length)){n.next=10;break}return t=r[o],n.next=7,e.saveBook(t);case 7:o++,n.next=3;break;case 10:window.location.href="/page/MyBooks";case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return t.a.createElement(s.x,null,t.a.createElement(s.l,null,t.a.createElement(s.B,null,t.a.createElement(s.d,{slot:"start"},t.a.createElement(s.t,null)),t.a.createElement(s.A,null,"Upload an eBook"))),t.a.createElement(s.j,null,t.a.createElement("form",{id:"book-upload-form",onSubmit:function(n){n.preventDefault(),i()}},"Select ePub:",t.a.createElement("input",{type:"file",name:"file",onChange:function(n){return o(n.target.files)}}),t.a.createElement("br",null),t.a.createElement("br",null),t.a.createElement(s.c,{type:"submit"},"submit"))))}),P=r(3),W=r(12),j=r(11),x=(r(142),r(143),function(n){var e=n.book,r=n.selectBook;return t.a.createElement(s.e,{class:"book-tile",onClick:function(){return r(e)}},t.a.createElement(s.f,null,t.a.createElement("img",{src:"data:image/png;base64, "+e.coverImage,alt:"Red dot"})),t.a.createElement(s.g,null,t.a.createElement(s.i,null,e.name),t.a.createElement(s.h,null,e.author)))}),w=r(79),E=r(37),O=r(78),_=r(102),D=(r(175),[{find:/\bthe fuck\b/gi,replace:"the heck"},{find:/\bfucker/gi,replace:"guy"},{find:/\bfuckin/gi,replace:"spacin"},{find:/\bfucked\b/gi,replace:"screwed"},{find:/\bfuck th/gi,replace:"screw th"},{find:/\bMotherfucker/gi,replace:"jerk"},{find:/fuck\b/gi,replace:"space"},{find:/fuck/gi,replace:"storm"},{find:/\bhell\b/gi,replace:"heck"},{find:/\bsonofabitch\b/gi,replace:"son-of-a-gun"},{find:/\bbitch\b/gi,replace:"dog"},{find:/\basshole/gi,replace:"jerk"},{find:/\bass\b/gi,replace:"butt"},{find:/\basses\b/gi,replace:"butts"},{find:/pissed/gi,replace:"peed"},{find:/piss/gi,replace:"pee"},{find:/jesus/gi,replace:"geez"},{find:/christ/gi,replace:"geez"},{find:/shitty\b/gi,replace:"bad"},{find:/shittier\b/gi,replace:"worse"},{find:/shittiest\b/gi,replace:"worst"},{find:/shit\b/gi,replace:"crap"},{find:/shitting\b/gi,replace:"crapping"},{find:/\bbastard([s]*)\b/gi,replace:"illegitimate son$1"},{find:/\bwhorehouse\b/gi,replace:"brothel"},{find:/\bwhor([ei])/gi,replace:"prostitut$1"},{find:/\bgoddamn/gi,replace:"darn"},{find:/\bdamn\b/gi,replace:"darn"}]),B={"sexually-explicit":{anus:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},anal:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},ballbag:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},ballsack:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},beastial:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},beastiality:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},"blow job":{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},blowjob:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},boner:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},boning:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},boob:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},breasts:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!0},ass:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},butt:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},buttplug:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},butthole:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},clit:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},clitoris:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cock:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},"cock-sucker":{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cockface:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cockhead:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cockmunch:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cockmuncher:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cocksuck:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cocksucked:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cocksucker:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cocksucking:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cum:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cummer:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cumming:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cumshot:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cunilingus:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cunillingus:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cunnilingus:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cunt:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cuntlick:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cuntlicker:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},cuntlicking:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},dick:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},dickhead:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},dildo:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},ejaculate:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},ejaculation:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},ejaculating:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},fellatio:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},gangbang:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},"hand job":{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},horniest:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},horny:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},"jack-off":{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},jackoff:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},"jerk-off":{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},jizz:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},labia:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},lust:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},lusting:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},masochist:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},masturbate:{censorContainingWords:!0,censorContainingSentence:!0,censorContainingParagraph:!0},orgasm:{censorContainingWords:!0,censorContainingSentence:!0,censorContainingParagraph:!0},pecker:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},penis:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},porn:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},porno:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},pornography:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},pornos:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},pube:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},pubic:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},pussies:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},pussy:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},rectum:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},rimming:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},sadist:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},scrotum:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},semen:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},sex:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!1},shagging:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shemale:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},skank:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},slut:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},sluts:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},testicle:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},tit:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},titties:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},twat:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},twathead:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},vagina:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},vulva:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},wank:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},"whacking off":{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},whore:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},xrated:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0},xxx:{censorContainingWords:!1,censorContainingSentence:!0,censorContainingParagraph:!0}},rude:{arse:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},bastard:{censorContainingWords:!0,censorContainingSentence:!1,censorContainingParagraph:!1},bellend:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},bloody:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},butt:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},crap:{censorContainingWords:!0,censorContainingSentence:!1,censorContainingParagraph:!1},piss:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},pissed:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},pisser:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},pissers:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},pisses:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},pissflaps:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},pissin:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},pissing:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},pissoff:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},poop:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},turd:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1}},blasphemous:{christ:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},god:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},"god-dam":{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},"god-damned":{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},goddamn:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},goddamned:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},jesus:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},hell:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1}},insensitive:{nazi:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},nigga:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},niggah:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},niggas:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},niggaz:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},nigger:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},niggers:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},retard:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1}},strong:{ass:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},asses:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},asshole:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},assholes:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},bitch:{censorContainingWords:!0,censorContainingSentence:!1,censorContainingParagraph:!1},butthole:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},damn:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},dick:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},dickhead:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},"f u c k":{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},"f u c k e r":{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},fag:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},faggot:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},fags:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},fuck:{censorContainingWords:!0,censorContainingSentence:!1,censorContainingParagraph:!1},shag:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shit:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shithead:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shits:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shitted:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shitter:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shitters:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shitting:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shittings:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},shitty:{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1},"son-of-a-bitch":{censorContainingWords:!1,censorContainingSentence:!1,censorContainingParagraph:!1}}},A=function n(){var e=this;Object(S.a)(this,n),this.regexes=void 0,this.generateRegexes=function(n){var e={removeWords:[],removeSentences:[],removeParagraphs:[]};Object.entries(B).forEach((function(r){var o=Object(E.a)(r,2),t=(o[0],o[1]);Object.entries(t).forEach((function(r){var o=Object(E.a)(r,2),t=o[0],a=o[1];if(!(t in n)){var i=t+"s?";a.censorContainingWords&&(i="[a-z\\-]*".concat(i,"[a-z\\-]*")),i="\\b".concat(i,"\\b"),a.censorContainingParagraph?e.removeParagraphs.push(i):a.censorContainingSentence?e.removeSentences.push(i):e.removeWords.push(i)}}))}));var r=e.removeWords.length>0?"(".concat(e.removeWords.join("|"),")"):"",o=e.removeSentences.length>0?e.removeSentences.join("|"):"",t=e.removeParagraphs.length>0?e.removeParagraphs.join("|"):"";return{removeWords:r?new RegExp(r,"gi"):null,removeSentences:o?new RegExp(o,"i"):null,removeParagraphs:t?new RegExp(t,"i"):null}},this.filterPhrase=function(n,e,r,o,t){var a,i=n;do{if(a=e.exec(i)){var s=i.lastIndexOf(r,a.index)+1,c=i.indexOf(o,a.index+a[0].length);i=i.substring(0,s)+t+i.substring(c)}}while(a);return i},this.estimate=function(n){var r=function(n,e){var r=n[0].toLowerCase();e[r]=e[r]||[],e[r].push({index:n.index})},o={custom:{},paragraphs:{},sentences:{},words:{}},t=n;if(D.forEach((function(n){Array.from(t.matchAll(n.find)).forEach((function(n){r(n,o.custom)})),t=t.replace(n.find,n.replace)})),e.regexes.removeParagraphs){var a=new RegExp(e.regexes.removeParagraphs,"gi");Array.from(t.matchAll(a)).forEach((function(n){r(n,o.paragraphs)})),t=t.replace(a,(function(n){return"*".repeat(n.length)}))}return e.regexes.removeSentences&&(Array.from(t.matchAll(e.regexes.removeSentences)).forEach((function(n){r(n,o.sentences)})),t=t.replace(e.regexes.removeSentences,(function(n){return"*".repeat(n.length)}))),e.regexes.removeWords&&(Array.from(t.matchAll(e.regexes.removeWords)).forEach((function(n){r(n,o.words)})),t=t.replace(e.regexes.removeWords,(function(n){return"*".repeat(n.length)}))),Object.entries(o).forEach((function(n){var e=Object(E.a)(n,2),r=(e[0],e[1]);Object.entries(r).forEach((function(n){var e=Object(E.a)(n,2);e[0];e[1].forEach((function(n){n.matchText=t.substring(n.index-150,n.index+150),n.matchText=n.matchText.replace(/<[^>]+>/gi,""),n.matchText=n.matchText.replace(/^[^>]+>/gi,""),n.matchText=n.matchText.replace(/<[^<]+>/gi,""),n.matchText=n.matchText.replace(/<[^<]+$/gi,""),n.matchText="...".concat(n.matchText.trim(),"...")}))}))})),o},this.clean=function(n){var r=n;return D.forEach((function(n){r=r.replace(n.find,n.replace)})),e.regexes.removeParagraphs&&(r=e.filterPhrase(r,e.regexes.removeParagraphs,">","<","<i>[paragraph removed by filters]</i>")),e.regexes.removeSentences&&(r=e.filterPhrase(r,e.regexes.removeSentences,">","<","<i>[sentence removed by filters]</i>")),e.regexes.removeWords&&(r=r.replace(e.regexes.removeWords,(function(n){0;for(var e="",r=0;r<n.length;r++)e+=" "===n.charAt(r)?" ":"*";return e}))),r},this.regexes=this.generateRegexes({bastard:!1,bloody:!1,butt:!1,crap:!1,god:!1,heck:!1,hell:!1,poop:!1,sex:!1,turd:!1})},I=function(n){Object(W.a)(r,n);var e=Object(j.a)(r);function r(n){var o;return Object(S.a)(this,r),(o=e.call(this,n)).state={book:n.bookMeta,rendition:null},o}return Object(P.a)(r,[{key:"componentDidMount",value:function(){var n=Object(h.a)(C.a.mark((function n(){var e,r,o,t,a,i;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=new y,n.next=3,e.getBook(this.state.book.id);case 3:return r=n.sent,o=Object(O.a)(Object(O.a)({},this.state.book),r),this.setState({book:o}),n.next=8,e.getLocation(this.state.book.id);case 8:return t=n.sent,n.next=11,this.fileToArrayBuffer(o.file);case 11:return a=n.sent,n.next=14,this.applyFilters(a);case 14:i=n.sent,this.renderBook(i,t?t.bookLocation:null);case 16:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"fileToArrayBuffer",value:function(){var n=Object(h.a)(C.a.mark((function n(e){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){var r=new FileReader;r.onload=function(){n(r.result)},r.readAsArrayBuffer(e)})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},{key:"renderBook",value:function(){var n=Object(h.a)(C.a.mark((function n(e,r){var o,t;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{(o=Object(_.a)()).open(e,"binary"),(t=o.renderTo("epub-renderer")).themes.default({"body *":{color:"#CCC !important"},p:{"font-size":"15px !important"}}),r&&r.end&&r.end.cfi?t.display(r.end.cfi):t.display(),this.setState({rendition:t}),this.configureArrowKeyNav(t),this.configureLocationSaving(t)}catch(a){console.error(a)}case 1:case"end":return n.stop()}}),n,this)})));return function(e,r){return n.apply(this,arguments)}}()},{key:"applyFilters",value:function(){var n=Object(h.a)(C.a.mark((function n(e){var r,o,t,a,i,s,c,g,u,l,d;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.time("applying filters"),r={},o=new A,t=new m.a,n.next=6,t.loadAsync(e);case 6:return n.next=8,t.file(/[\s\S]*/);case 8:a=n.sent,i=Object(p.a)(a),n.prev=10,i.s();case 12:if((s=i.n()).done){n.next=21;break}if(!(c=s.value)){n.next=19;break}return n.next=17,c.async("text");case 17:(g=n.sent).includes("<?xml")&&(u=o.clean(g),l=o.estimate(g),this.mergeFilterSummary(r,l),t.file(c.name,u));case 19:n.next=12;break;case 21:n.next=26;break;case 23:n.prev=23,n.t0=n.catch(10),i.e(n.t0);case 26:return n.prev=26,i.f(),n.finish(26);case 29:return console.dir(JSON.stringify(r)),n.next=32,t.generateAsync({type:"arraybuffer"});case 32:return d=n.sent,console.timeEnd("applying filters"),n.abrupt("return",d);case 35:case"end":return n.stop()}}),n,this,[[10,23,26,29]])})));return function(e){return n.apply(this,arguments)}}()},{key:"mergeFilterSummary",value:function(n,e){Object.entries(e).forEach((function(e){var r=Object(E.a)(e,2),o=r[0],t=r[1];Object.entries(t).forEach((function(e){var r=Object(E.a)(e,2),t=r[0],a=r[1];n[o]=n[o]||{};var i=n[o];i[t]=i[t]||[],i[t]=[].concat(Object(w.a)(i[t]),Object(w.a)(a))}))}))}},{key:"configureArrowKeyNav",value:function(n){n.on("keyup",(function(e){37===(e.keyCode||e.which)&&n.prev(),39===(e.keyCode||e.which)&&n.next()}))}},{key:"configureLocationSaving",value:function(n){var e=this,r=new y;n.on("relocated",(function(n){n.atStart||r.saveLocation(e.state.book.id,n)}))}},{key:"close",value:function(){var n=Object(h.a)(C.a.mark((function n(){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.props.closeBook();case 1:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"nextPage",value:function(){this.state.rendition&&this.state.rendition.next()}},{key:"prevPage",value:function(){this.state.rendition&&this.state.rendition.prev()}},{key:"render",value:function(){var n=this;return t.a.createElement(s.j,null,t.a.createElement(s.v,{isOpen:!0,cssClass:"epub-renderer-modal"},t.a.createElement("div",{id:"render-wrapper"},t.a.createElement("div",{id:"epub-renderer"})),t.a.createElement(s.k,null,t.a.createElement(s.c,{size:"small",onClick:function(){n.prevPage()}}," ","<<"," "),t.a.createElement(s.c,{size:"small",onClick:function(){n.close()}},"close"),t.a.createElement(s.c,{size:"small",onClick:function(){n.nextPage()}}," ",">>"," "))))}}]),r}(t.a.Component),R=Object(s.E)(I),L=function(n){Object(W.a)(r,n);var e=Object(j.a)(r);function r(n){var o;return Object(S.a)(this,r),(o=e.call(this,n)).state={books:new Array,currentlyReading:null},o}return Object(P.a)(r,[{key:"ionViewWillEnter",value:function(){var n=Object(h.a)(C.a.mark((function n(){var e,r;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=new y,n.next=3,e.listBooks();case 3:r=n.sent,this.setState({books:r});case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"render",value:function(){var n=this,e=function(e){n.setState({currentlyReading:e})};return t.a.createElement(s.x,null,t.a.createElement(s.l,null,t.a.createElement(s.B,null,t.a.createElement(s.d,{slot:"start"},t.a.createElement(s.t,null)),t.a.createElement(s.A,null,"My Books"))),t.a.createElement(s.j,null,this.state.books&&this.state.books.map((function(n){return t.a.createElement(x,{key:n.id,book:n,selectBook:e})})),this.state.currentlyReading&&t.a.createElement(R,{key:this.state.currentlyReading.id,bookMeta:this.state.currentlyReading,closeBook:function(){n.setState({currentlyReading:null})}})))}}]),r}(t.a.Component),T=Object(s.E)(L),M=(r(176),function(){return t.a.createElement(s.x,null,t.a.createElement(s.l,null,t.a.createElement(s.B,null,t.a.createElement(s.d,{slot:"start"},t.a.createElement(s.t,null)),t.a.createElement(s.A,null,"Donate"))),t.a.createElement(s.j,null,t.a.createElement(s.l,{collapse:"condense"},t.a.createElement(s.B,null,t.a.createElement(s.A,{size:"large"},"Donate")))))}),N=r(105),z=(r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),function(){return t.a.createElement(s.b,null,t.a.createElement(N.a,null,t.a.createElement(s.z,{contentId:"main"},t.a.createElement(l,null),t.a.createElement(s.y,{id:"main"},t.a.createElement(c.c,{path:"/page/Upload",component:k,exact:!0}),t.a.createElement(c.c,{path:"/page/MyBooks",component:T,exact:!0}),t.a.createElement(c.c,{path:"/page/Donate",component:M,exact:!0}),t.a.createElement(c.b,{from:"/",to:"/page/MyBooks",exact:!0})))))}),U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(n,e){navigator.serviceWorker.register(n).then((function(n){n.waiting&&n.waiting.postMessage({type:"SKIP_WAITING"});n.onupdatefound=function(){var r=n.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}})).catch((function(n){console.error("Error during service worker registration:",n)}))}i.a.render(t.a.createElement(z,null),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");U?(!function(n,e){fetch(n,{headers:{"Service-Worker":"script"}}).then((function(r){var o=r.headers.get("content-type");404===r.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):F(n,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):F(e,n)}))}}()}},[[108,9,12]]]);
//# sourceMappingURL=main.df0c111e.chunk.js.map